#### TCP/IP

![image-20210929112820793](image-20210929112820793.png)

![image-20210929114259741](image-20210929114259741.png)

###### 案例：运行FTP的两台主机：应用层和传输层是端到端的协议，网络层使用的是逐跳(hop-by-hop)协议（可以有端到端的方式），链路层是逐媒体的。

![image-20210929120817573](image-20210929120817573.png)

- 网络ip提供了不可靠的服务，仅仅尽快地把分组从源节点送到目的节点，不提供可靠性保障；TCP在IP的基础上提供一个可靠的运输层。

- 互联网的目的之一就是在应用程序中隐藏所有物理细节。

  ![image-20210929154911344](image-20210929154911344.png)

封装：

![image-20210929161531744](image-20210929161531744.png)

以太网帧大小为46-1500个字节

端口号:

- 服务器端口号一般是已知的端口号，例如：ftp 21，telnet 23。
- 客户端端口号为随机的临时端口号，临时端口号分配在1024-5000之间。

##### 链路层：以太网和IEEE 802封装

$$
IP地址为逻辑地址，

MAC地址为硬件地址，

两者配合才能够进行通讯
$$

当数据量比MTU大的时候，会将数据进行分片发送

802.3MAC：MTU = 1492

![image-20210929171543944](image-20210929171543944.png)

以太网：MTU = 1500

![image-20210929171558663](image-20210929171558663.png)

以太网例：

![image-20210929171859715](image-20210929171859715.png)

**环回接口地址**(一般为127开头的任意IP数据，如：127.0.0.1)

环回口地址不经过以太网，直接内部数据传回

![image-20210929174911627](image-20210929174911627.png)





##### IP:网际协议

是TCP/IP协议族中最核心的协议，提供不可靠，无连接的数据报传输服务。

所有的TCP，UDP，ICMP，IGMP数据都以IP数据报格式传输

ps:windows下ifconfig和netstat为两个查看ip通讯的指令；linux下为ifconfig



###### IP数据报格式及首部中各字段：

![image-20210929195051305](image-20210929195051305.png)



###### IP路由选择





ARP

ICMP

PING

Traceoute

IP选路

UDP

广播与多播

DNS

TFTP

应用层协议：FTP，Telnet，HTTP，SMYP/POP3，SSL，SNMP，SIP